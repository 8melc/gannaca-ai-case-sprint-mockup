<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Case-Erfassung | gannaca AI-Case Sprint</title>
  
  <!-- Styles -->
  <link rel="stylesheet" href="../styles/variables.css">
  <link rel="stylesheet" href="../styles/main.css">
  <link rel="stylesheet" href="../styles/components.css">
  <link rel="stylesheet" href="../styles/forms.css">
  
  <!-- Google Fonts (Inter) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Storage Script -->
  <script src="../js/storage.js"></script>
  
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
  
  <!-- Fokus-Modus Styles -->
  <style>
    /* FOKUS-MODUS BUTTON */
    .btn-focus-mode {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 14px;
      background: var(--off-white);
      border: 2px solid var(--navy);
      border-radius: 8px;
      color: var(--navy);
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .btn-focus-mode:hover {
      background: var(--navy);
      color: white;
    }
    .btn-focus-mode.active {
      background: var(--navy);
      color: white;
    }
    .btn-focus-mode i[data-lucide] {
      width: 16px;
      height: 16px;
    }
    
    /* FOKUS-MODUS NAVIGATION */
    .focus-nav {
      display: none;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      border-top: 2px solid var(--navy);
      padding: 16px 40px;
      z-index: 1000;
      box-shadow: 0 -4px 20px rgba(0,0,0,0.15);
    }
    .focus-nav-inner {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .focus-nav-progress {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .focus-nav-step {
      font-size: 18px;
      font-weight: 700;
      color: var(--navy);
    }
    .focus-nav-dots {
      display: flex;
      gap: 6px;
    }
    .focus-nav-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #ddd;
      transition: all 0.2s;
    }
    .focus-nav-dot.active {
      background: var(--navy);
      transform: scale(1.2);
    }
    .focus-nav-dot.completed {
      background: #28a745;
    }
    .focus-nav-buttons {
      display: flex;
      gap: 12px;
    }
    .focus-nav-btn {
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.2s;
    }
    .focus-nav-btn-prev {
      background: white;
      border: 2px solid var(--navy);
      color: var(--navy);
    }
    .focus-nav-btn-prev:hover {
      background: var(--off-white);
    }
    .focus-nav-btn-prev:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }
    .focus-nav-btn-next {
      background: var(--navy);
      border: 2px solid var(--navy);
      color: white;
    }
    .focus-nav-btn-next:hover {
      background: #0d2840;
    }
    .focus-nav-btn i[data-lucide] {
      width: 18px;
      height: 18px;
    }
    
    /* FOKUS-MODUS AKTIV */
    body.focus-mode-active .form-section {
      display: none !important;
    }
    body.focus-mode-active .form-section.focus-visible {
      display: block !important;
      animation: fadeInUp 0.3s ease;
      /* Bessere Darstellung im Fokus-Modus */
      max-width: 800px;
      margin: 0 auto;
      padding: 32px 40px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.08);
    }
    body.focus-mode-active .focus-nav {
      display: block;
    }
    body.focus-mode-active .form-actions,
    body.focus-mode-active .form-disclaimer,
    body.focus-mode-active .form-progress,
    body.focus-mode-active .form-header {
      display: none !important;
    }
    body.focus-mode-active .main-content {
      padding-bottom: 120px;
      padding-top: calc(var(--header-height) + var(--nav-height) + 40px);
    }
    body.focus-mode-active .form-container {
      background: transparent;
      box-shadow: none;
      padding: 0;
    }
    body.focus-mode-active .page-header {
      margin-bottom: 24px;
    }
    body.focus-mode-active .page-title {
      font-size: 20px;
    }
    body.focus-mode-active .page-subtitle {
      display: none;
    }
    /* Schritt-Nummer größer im Fokus */
    body.focus-mode-active .form-section-number {
      width: 48px;
      height: 48px;
      font-size: 20px;
    }
    body.focus-mode-active .form-section-title {
      font-size: 22px;
      margin-bottom: 24px;
    }
    body.focus-mode-active .form-input,
    body.focus-mode-active .form-textarea,
    body.focus-mode-active .form-select {
      font-size: 16px;
      padding: 14px 16px;
    }
    body.focus-mode-active .form-radio-item,
    body.focus-mode-active .form-checkbox-item {
      padding: 14px 18px;
      font-size: 15px;
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body>
  <div class="page-wrapper">
    
    <!-- NEUER HEADER -->
    <header class="main-header">
      <div class="header-container">
        <div class="header-left">
          <div class="logo-group">
            <img src="../assets/gannaca-logo.png" alt="gannaca" class="gannaca-logo">
            <div class="title-group">
              <h1 class="main-title">AI-Case Sprint</h1>
              <p class="subtitle">Standardisiertes Framework für KI-Use-Case-Entwicklung</p>
            </div>
          </div>
        </div>
        <div class="header-right">
          <img src="../assets/trianel-logo.png" alt="Trianel" class="client-logo">
          <div class="header-info">
            <span class="version-badge">04.02.2026</span>
            <span class="header-disclaimer">Konzeptioneller Mockup – Keine Produktivdaten</span>
          </div>
        </div>
      </div>
    </header>
    
    <!-- NAVIGATION -->
    <nav class="nav-tabs">
      <div class="nav-tabs-inner">
        <a href="screen-0-workshop-process.html" class="nav-tab"><span class="nav-tab-number">0</span> Workshop-Prozess</a>
        <a href="screen-1-overview.html" class="nav-tab"><span class="nav-tab-number">1</span> Übersicht</a>
        <a href="screen-2-kpi.html" class="nav-tab"><span class="nav-tab-number">2</span> KPI-Rahmen</a>
        <a href="screen-3-governance.html" class="nav-tab"><span class="nav-tab-number">3</span> Governance</a>
        <a href="screen-4-process.html" class="nav-tab"><span class="nav-tab-number">4</span> Zielprozess</a>
        <a href="screen-5-mockup.html" class="nav-tab"><span class="nav-tab-number">5</span> Visualisierung</a>
        <a href="screen-6-form.html" class="nav-tab active"><span class="nav-tab-number">6</span> Case-Erfassung <i data-lucide="star" class="icon-sm"></i></a>
        <a href="screen-7-results.html" class="nav-tab"><span class="nav-tab-number">7</span> Ergebnis</a>
        <a href="screen-8-matrix.html" class="nav-tab"><span class="nav-tab-number">8</span> Matrix</a>
      </div>
    </nav>
    
    <!-- MAIN CONTENT -->
    <main class="main-content">
      
      <!-- Page Header -->
      <div class="page-header">
        <div class="page-header-inner">
          <h1 class="page-title"><i data-lucide="clipboard-edit" class="icon-with-text"></i>Live-Erfassung: Ihre Cases strukturiert dokumentiert</h1>
          <p class="page-subtitle">Für alle Teilnehmer sichtbar – Eingabe durch gannaca-Team</p>
        </div>
      </div>
      
      <div class="container">
        
        <!-- Progress Bar -->
        <div class="form-progress">
          <div class="form-progress-header">
            <span class="form-progress-label">Erfasste Cases</span>
            <span class="form-progress-count" id="progressCount">0 von ~20 (Ziel)</span>
          </div>
          <div class="form-progress-bar">
            <div class="form-progress-fill" id="progressFill" style="width: 0%;"></div>
          </div>
        </div>
        
        <!-- Form Container -->
        <div class="form-container">
          
          <!-- INFO BOX (nur sichtbar wenn NICHT im Fokus-Modus) -->
          <div class="form-disclaimer" style="padding: 12px 16px; margin-bottom: 16px;">
            <div class="form-disclaimer-icon"><i data-lucide="info"></i></div>
            <div class="form-disclaimer-content">
              <div class="form-disclaimer-title" style="font-size: 13px;">So funktioniert's:</div>
              <p style="font-size: 12px; color: #777; margin: 0; line-height: 1.5;">
                Live-Dokumentation Ihrer Cases nach den 11 Standardfragen. 
                Keine Bewertung jetzt – KI-Priorisierung erfolgt nach dem Workshop.
              </p>
            </div>
          </div>
          
          <!-- Form Header / Meta Info -->
          <div class="form-header">
            <div class="form-header-row">
              <div class="form-meta">
                <div class="form-meta-item">
                  <span class="form-meta-label">Case-Nummer:</span>
                  <strong style="color: var(--color-accent);" id="caseNumber">#01</strong>
                </div>
                <div class="form-meta-item">
                  <span class="form-meta-label">Erfasst von:</span>
                  <span>Melissa Conrads</span>
                </div>
                <div class="form-meta-item">
                  <span class="form-meta-label">Zeitstempel:</span>
                  <span id="currentTime">--:-- Uhr</span>
                </div>
              </div>
              <div class="form-meta" style="display: flex; align-items: center; gap: var(--spacing-lg);">
                <!-- FOKUS-MODUS TOGGLE -->
                <button type="button" class="btn btn-focus-mode" id="focusModeToggle" onclick="toggleFocusMode()" title="Fokus-Modus für Beamer-Präsentation">
                  <i data-lucide="maximize-2" id="focusModeIcon"></i>
                  <span id="focusModeLabel">Fokus</span>
                </button>
              </div>
            </div>
          </div>
          
          <!-- FORMULAR -->
          <form id="caseForm">
            
            <!-- FELD 1: Problem-Titel -->
            <div class="form-section">
              <h3 class="form-section-title">
                <span class="form-section-number">1</span>
                Problem-Titel
              </h3>
              <div class="form-group">
                <label class="form-label form-label-required">Kurzer, prägnanter Titel (5-10 Wörter)</label>
                <input type="text" class="form-input" id="problemTitel" placeholder="z.B. Manuelle Prüfung von Vertragsänderungen zeitaufwendig" maxlength="100" required>
                <span class="form-hint">Beschreiben Sie das Problem in einem Satz.</span>
              </div>
            </div>
            
            <!-- FELD 2: Betroffene Abteilung(en) -->
            <div class="form-section">
              <h3 class="form-section-title">
                <span class="form-section-number">2</span>
                Betroffene Abteilung(en)
              </h3>
              <div class="form-group">
                <label class="form-label form-label-required">Welche Abteilungen sind betroffen?</label>
                <div class="form-checkbox-group" id="abteilungen">
                  <label class="form-checkbox-item"><input type="checkbox" class="form-checkbox" name="abteilung" value="Legal"><span class="form-checkbox-label">Legal</span></label>
                  <label class="form-checkbox-item"><input type="checkbox" class="form-checkbox" name="abteilung" value="Compliance"><span class="form-checkbox-label">Compliance</span></label>
                  <label class="form-checkbox-item"><input type="checkbox" class="form-checkbox" name="abteilung" value="Revision"><span class="form-checkbox-label">Revision</span></label>
                  <label class="form-checkbox-item"><input type="checkbox" class="form-checkbox" name="abteilung" value="IT"><span class="form-checkbox-label">IT</span></label>
                  <label class="form-checkbox-item"><input type="checkbox" class="form-checkbox" name="abteilung" value="HR"><span class="form-checkbox-label">HR</span></label>
                  <label class="form-checkbox-item"><input type="checkbox" class="form-checkbox" name="abteilung" value="Finance"><span class="form-checkbox-label">Finance</span></label>
                </div>
              </div>
            </div>
            
            <!-- FELD 3: Ausgangslage / Ist-Zustand -->
            <div class="form-section">
              <h3 class="form-section-title">
                <span class="form-section-number">3</span>
                Ausgangslage / Ist-Zustand
              </h3>
              <div class="form-group">
                <label class="form-label form-label-required">Wie läuft der Prozess aktuell? Was sind die einzelnen Schritte?</label>
                <textarea class="form-textarea" id="ausgangslage" rows="4" placeholder="Beschreiben Sie den aktuellen Ablauf Schritt für Schritt..." required></textarea>
              </div>
            </div>
            
            <!-- FELD 4: Konkretes Problem / Engpass -->
            <div class="form-section">
              <h3 class="form-section-title">
                <span class="form-section-number">4</span>
                Konkretes Problem / Engpass
              </h3>
              <div class="form-group">
                <label class="form-label form-label-required">Was genau ist das Problem? Wo liegt der Flaschenhals?</label>
                <textarea class="form-textarea" id="problem" rows="3" placeholder="z.B. Hoher Zeitaufwand, Fehleranfälligkeit, mangelnde Dokumentation..." required></textarea>
              </div>
            </div>
            
            <!-- FELD 5: Häufigkeit / Volumen -->
            <div class="form-section">
              <h3 class="form-section-title">
                <span class="form-section-number">5</span>
                Häufigkeit / Volumen
              </h3>
              <div class="form-group">
                <label class="form-label form-label-required">Wie oft tritt das Problem auf?</label>
                <div class="form-radio-group" id="haeufigkeit">
                  <label class="form-radio-item"><input type="radio" class="form-radio" name="haeufigkeit" value="Täglich"><span class="form-radio-label">Täglich</span></label>
                  <label class="form-radio-item"><input type="radio" class="form-radio" name="haeufigkeit" value="Wöchentlich"><span class="form-radio-label">Wöchentlich</span></label>
                  <label class="form-radio-item"><input type="radio" class="form-radio" name="haeufigkeit" value="Monatlich"><span class="form-radio-label">Monatlich</span></label>
                  <label class="form-radio-item"><input type="radio" class="form-radio" name="haeufigkeit" value="Quartalsweise"><span class="form-radio-label">Quartalsweise</span></label>
                </div>
                <div class="form-inline-group" style="margin-top: var(--spacing-lg);">
                  <span class="form-inline-label">Anzahl Vorgänge pro Zeiteinheit:</span>
                  <input type="number" class="form-input form-input-small" id="anzahlVorgaenge" placeholder="z.B. 50" min="1">
                </div>
              </div>
            </div>
            
            <!-- FELD 6: Betroffene Personen & Zeitaufwand -->
            <div class="form-section">
              <h3 class="form-section-title">
                <span class="form-section-number">6</span>
                Betroffene Personen & Zeitaufwand
              </h3>
              <div class="form-group">
                <div class="grid grid-3" style="gap: var(--spacing-xl);">
                  <div>
                    <label class="form-label form-label-required">Anzahl betroffener Mitarbeiter</label>
                    <input type="number" class="form-input" id="betroffenePersonen" placeholder="z.B. 3" min="1">
                  </div>
                  <div>
                    <label class="form-label form-label-required">Zeitaufwand pro Fall</label>
                    <div class="form-inline-group">
                      <input type="number" class="form-input" id="zeitaufwandWert" placeholder="z.B. 25" min="1" style="width: 100px;">
                      <select class="form-select" id="zeitaufwandEinheit" style="width: auto;">
                        <option value="minutes">Minuten</option>
                        <option value="hours">Stunden</option>
                      </select>
                    </div>
                  </div>
                  <div>
                    <label class="form-label">Gesamtaufwand/Jahr (geschätzt)</label>
                    <input type="text" class="form-input" id="gesamtaufwand" placeholder="Wird berechnet..." readonly style="background: var(--color-bg-light); font-weight: 700; transition: background-color 0.3s ease;">
                    <span class="form-hint" id="gesamtaufwandHint" style="display: none; color: #28a745; margin-top: 4px;"><i data-lucide="check" class="icon-sm icon-success"></i> Automatisch berechnet</span>
                    <span class="form-hint" id="gesamtaufwandFormel" style="margin-top: 4px; font-size: 11px; color: var(--text-light);"><i data-lucide="calculator" class="icon-sm"></i> = Vorgänge × Häufigkeit × Zeit × Personen</span>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- FELD 7: Strategische Relevanz -->
            <div class="form-section">
              <h3 class="form-section-title">
                <span class="form-section-number">7</span>
                Strategische Relevanz
              </h3>
              <div class="form-group">
                <label class="form-label form-label-required">Erste Einschätzung durch Teilnehmer</label>
                <div class="form-radio-group" id="relevanz">
                  <label class="form-radio-item" style="flex: 1; justify-content: center;"><input type="radio" class="form-radio" name="relevanz" value="Hoch"><span class="form-radio-label">■ Hoch</span></label>
                  <label class="form-radio-item" style="flex: 1; justify-content: center;"><input type="radio" class="form-radio" name="relevanz" value="Mittel"><span class="form-radio-label">▪ Mittel</span></label>
                  <label class="form-radio-item" style="flex: 1; justify-content: center;"><input type="radio" class="form-radio" name="relevanz" value="Niedrig"><span class="form-radio-label">○ Niedrig</span></label>
                </div>
              </div>
            </div>
            
            <!-- FELD 8: Risiko bei Nicht-Handlung -->
            <div class="form-section">
              <h3 class="form-section-title">
                <span class="form-section-number">8</span>
                Risiko bei Nicht-Handlung
              </h3>
              <div class="form-group">
                <label class="form-label form-label-required">Was passiert, wenn das Problem NICHT gelöst wird? (Skala 1-5)</label>
                <div class="form-rating-group" id="risikoGroup">
                  <label class="form-rating-item"><input type="radio" name="risiko" value="1">1</label>
                  <label class="form-rating-item"><input type="radio" name="risiko" value="2">2</label>
                  <label class="form-rating-item"><input type="radio" name="risiko" value="3">3</label>
                  <label class="form-rating-item"><input type="radio" name="risiko" value="4">4</label>
                  <label class="form-rating-item"><input type="radio" name="risiko" value="5">5</label>
                </div>
                <span class="form-hint" style="margin-top: var(--spacing-sm);">1 = unkritisch | 5 = sehr kritisch</span>
                <div style="margin-top: var(--spacing-lg);">
                  <label class="form-label">Kurze Begründung (optional)</label>
                  <textarea 
                    class="form-textarea" 
                    id="risikoBegruendung" 
                    rows="3"
                    placeholder="z.B.: Betriebsprüfung: Fehler nicht nachzuvollziehen. Compliance-Risiko. Reputationsschaden bei Kunden. Audit-Findings, Bußgelder..."
                  ></textarea>
                </div>
              </div>
            </div>
            
            <!-- FELD 9: Vorhandene Lösungsansätze -->
            <div class="form-section">
              <h3 class="form-section-title">
                <span class="form-section-number">9</span>
                Vorhandene Lösungsansätze
              </h3>
              <div class="form-group">
                <label class="form-label">Gibt es bereits Tools, Workarounds oder Teilautomatisierungen?</label>
                <div class="form-radio-group">
                  <label class="form-radio-item"><input type="radio" class="form-radio" name="vorhandeneLoesung" value="yes"><span class="form-radio-label">Ja</span></label>
                  <label class="form-radio-item"><input type="radio" class="form-radio" name="vorhandeneLoesung" value="no"><span class="form-radio-label">Nein</span></label>
                </div>
                <div style="margin-top: var(--spacing-lg);">
                  <label class="form-label">Falls ja, bitte beschreiben:</label>
                  <input type="text" class="form-input" id="vorhandeneLösungBeschreibung" placeholder="z.B. Excel-Makro, SharePoint-Workflow...">
                </div>
              </div>
            </div>
            
            <!-- FELD 10: Daten-Verfügbarkeit -->
            <div class="form-section">
              <h3 class="form-section-title">
                <span class="form-section-number">10</span>
                Daten-Verfügbarkeit
              </h3>
              <div class="form-group">
                <label class="form-label form-label-required">Liegen die relevanten Daten digital vor?</label>
                <div class="form-radio-group" id="datenVerfuegbarkeit">
                  <label class="form-radio-item"><input type="radio" class="form-radio" name="datenVerfuegbarkeit" value="full_digital"><span class="form-radio-label"><i data-lucide="check-circle" class="icon-sm icon-success"></i> Ja, vollständig digital</span></label>
                  <label class="form-radio-item"><input type="radio" class="form-radio" name="datenVerfuegbarkeit" value="partial"><span class="form-radio-label"><i data-lucide="alert-triangle" class="icon-sm icon-warning"></i> Teilweise digital</span></label>
                  <label class="form-radio-item"><input type="radio" class="form-radio" name="datenVerfuegbarkeit" value="paper"><span class="form-radio-label"><i data-lucide="file-text" class="icon-sm icon-muted"></i> Überwiegend Papier</span></label>
                  <label class="form-radio-item"><input type="radio" class="form-radio" name="datenVerfuegbarkeit" value="unclear"><span class="form-radio-label">❓ Unklar</span></label>
                </div>
              </div>
            </div>
            
            <!-- FELD 11: KI-Potenzial -->
            <div class="form-section" style="background: var(--color-bg-light);">
              <h3 class="form-section-title">
                <span class="form-section-number">11</span>
                KI-Potenzial (Optional)
              </h3>
              <div class="form-group">
                <label class="form-label">
                  Wo könnte KI theoretisch unterstützen?
                </label>
                <textarea 
                  class="form-textarea" 
                  id="kiPotenzial" 
                  rows="5"
                  placeholder="z.B. KI könnte automatisch:
• Belege-Vollständigkeit prüfen
• Kostensätze abgleichen
• Richtlinien-Regeln prüfen
• Abweichungen flaggen
• Textanalyse durchführen
• Kategorisierung vornehmen

Tippe hier - das Feld wächst automatisch mit!"
                  style="background: var(--color-bg-white); min-height: 150px;"
                ></textarea>
                <span class="form-hint"><i data-lucide="info" class="icon-sm icon-info"></i> Keine Bewertung erforderlich. Dient nur der späteren Analyse. Das Feld wächst automatisch beim Tippen!</span>
              </div>
            </div>
            
            <!-- FORM ACTIONS -->
            <div class="form-actions">
              <div class="form-actions-left">
                <button type="button" class="btn btn-secondary" onclick="goToPreviousCase()">← Vorheriger Case</button>
                <button type="button" class="btn btn-tertiary" onclick="clearForm()"><i data-lucide="trash-2" class="icon-sm"></i> Formular leeren</button>
              </div>
              <div class="form-actions-right">
                <button type="button" class="btn btn-secondary" onclick="saveAndStay()"><i data-lucide="save" class="icon-sm"></i> Zwischenspeichern</button>
                <button type="button" class="btn btn-primary btn-lg" onclick="saveAndNext()">Speichern & Nächster Case →</button>
              </div>
            </div>
            
          </form>
          
        </div><!-- /form-container -->
        
        <!-- SUCCESS MODAL -->
        <div id="successModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.4); z-index: 1000; align-items: center; justify-content: center;">
          <div style="background: var(--white); padding: var(--space-10); border-radius: var(--border-radius-xl); text-align: center; max-width: 400px; border: 1px solid var(--border-gray); box-shadow: var(--shadow-lg);">
            <div style="margin-bottom: var(--space-4);"><i data-lucide="check-circle" class="icon-2xl icon-success"></i></div>
            <h2 style="margin-bottom: var(--space-2); color: var(--text-darkest);" id="modalTitle">Case #01 gespeichert!</h2>
            <p style="color: var(--text-medium); margin-bottom: var(--space-6);" id="modalText">Das Formular wurde geleert. Bereit für den nächsten Case.</p>
            <button class="btn btn-primary" onclick="closeModal()">Weiter</button>
          </div>
        </div>
        
      </div><!-- /container -->
      
    </main>
    
    <!-- FOOTER -->
    <footer class="footer">
      <div class="footer-inner">
        <span>© 2026 gannaca AI-Case Sprint Framework</span>
        <span>Konzeptioneller Mockup – Keine Produktivdaten</span>
      </div>
    </footer>
    
  </div><!-- /page-wrapper -->
  
  <!-- ============================================
       JAVASCRIPT
       ============================================ -->
  <script>
    // Beim Laden der Seite
    document.addEventListener('DOMContentLoaded', function() {
      updateUI();
      updateTime();
      
      // Markiere aktuellen Tab als "active"
      const currentPage = window.location.pathname.split('/').pop();
      document.querySelectorAll('.nav-tab').forEach(tab => {
        tab.classList.remove('active');
        if (tab.getAttribute('href') === currentPage) {
          tab.classList.add('active');
        }
      });
      setInterval(updateTime, 60000); // Zeit jede Minute aktualisieren
      
      // Rating Items klickbar machen
      document.querySelectorAll('.form-rating-item').forEach(item => {
        item.addEventListener('click', function() {
          this.parentElement.querySelectorAll('.form-rating-item').forEach(i => i.classList.remove('selected'));
          this.classList.add('selected');
          this.querySelector('input').checked = true;
        });
      });
      
      // Checkbox/Radio Styling
      document.querySelectorAll('.form-checkbox, .form-radio').forEach(input => {
        input.addEventListener('change', function() {
          if (this.type === 'checkbox') {
            this.closest('.form-checkbox-item').classList.toggle('selected', this.checked);
          } else {
            document.querySelectorAll(`input[name="${this.name}"]`).forEach(r => {
              r.closest('.form-radio-item').classList.remove('selected');
            });
            this.closest('.form-radio-item').classList.add('selected');
          }
        });
      });
      
      // ============================================
      // GESAMTAUFWAND AUTO-BERECHNUNG (Schritt 5 + 6)
      // ============================================
      // Event-Listener für Häufigkeit (Radio-Buttons)
      document.querySelectorAll('input[name="haeufigkeit"]').forEach(radio => {
        radio.addEventListener('change', calculateYearlyEffort);
      });
      
      // Event-Listener für numerische Eingaben
      ['anzahlVorgaenge', 'zeitaufwandWert', 'betroffenePersonen'].forEach(id => {
        const el = document.getElementById(id);
        if (el) {
          el.addEventListener('input', calculateYearlyEffort);
          el.addEventListener('change', calculateYearlyEffort);
        }
      });
      
      // Event-Listener für Zeiteinheit
      const zeitEinheit = document.getElementById('zeitaufwandEinheit');
      if (zeitEinheit) {
        zeitEinheit.addEventListener('change', calculateYearlyEffort);
      }
      
      // ============================================
      // AUTO-EXPAND TEXTAREAS
      // Textareas wachsen automatisch mit dem Inhalt!
      // ============================================
      initAutoExpandTextareas();
      
      // ============================================
      // SMOOTH SCROLL-TO-FIELD
      // Scrollt smooth zum Feld beim Fokus
      // ============================================
      setupSmoothScrollToField();
    });
    
    // ============================================
    // SMOOTH SCROLL-TO-FIELD FUNKTION
    // Zentriert das fokussierte Feld im Viewport
    // ============================================
    function setupSmoothScrollToField() {
      const formFields = document.querySelectorAll(
        'input[type="text"], input[type="number"], textarea, select'
      );
      
      formFields.forEach(field => {
        field.addEventListener('focus', function() {
          // Kurze Verzögerung für bessere UX
          setTimeout(() => {
            scrollToFieldSmooth(this);
          }, 150);
        });
      });
    }
    
    function scrollToFieldSmooth(field) {
      // Berechne Sticky-Header Offset
      const browserChrome = 48; // Browser-Chrome Höhe
      const header = document.querySelector('.header');
      const banner = document.querySelector('.data-protection-banner');
      const tabs = document.querySelector('.nav-tabs');
      
      let offset = browserChrome + 40; // Base + Extra Padding
      if (header) offset += header.offsetHeight;
      if (banner) offset += banner.offsetHeight;
      if (tabs) offset += tabs.offsetHeight;
      
      // Berechne Position des Feldes
      const rect = field.getBoundingClientRect();
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      const targetY = rect.top + scrollTop - offset;
      
      // Smooth Scroll
      window.scrollTo({
        top: targetY,
        behavior: 'smooth'
      });
    }
    
    // ============================================
    // AUTO-EXPAND TEXTAREA FUNKTION
    // Keine scrollbaren Textareas - sie wachsen mit!
    // ============================================
    function autoExpandTextarea(textarea) {
      // Höhe zurücksetzen, um echte Inhaltshöhe zu messen
      textarea.style.height = 'auto';
      
      // Neue Höhe basierend auf scrollHeight (= echter Inhalt)
      const newHeight = Math.max(textarea.scrollHeight, 120); // Mindestens 120px
      textarea.style.height = newHeight + 'px';
    }
    
    function initAutoExpandTextareas() {
      // Alle Textareas auf der Seite finden
      document.querySelectorAll('textarea').forEach(textarea => {
        // Initiale Mindesthöhe
        textarea.style.minHeight = '120px';
        
        // Event-Listener für Auto-Expand bei Eingabe
        textarea.addEventListener('input', function() {
          autoExpandTextarea(this);
        });
        
        // Event-Listener für Paste (eingefügter Text)
        textarea.addEventListener('paste', function() {
          // Kurze Verzögerung, damit der Text erst eingefügt wird
          setTimeout(() => autoExpandTextarea(this), 10);
        });
        
        // Initiale Berechnung falls bereits Inhalt vorhanden
        if (textarea.value) {
          autoExpandTextarea(textarea);
        }
        
        // Bullet-Point-Funktion aktivieren
        enableBulletPoints(textarea);
      });
    }
    
    // ============================================
    // BULLET-POINT AUTO-FORMATTING
    // Bei Enter → automatisch "- " auf neuer Zeile
    // ============================================
    function enableBulletPoints(textarea) {
      textarea.addEventListener('keydown', function(event) {
        // Nur bei Enter-Taste
        if (event.key === 'Enter') {
          const start = this.selectionStart;
          const end = this.selectionEnd;
          const text = this.value;
          
          // Finde Anfang der aktuellen Zeile
          let lineStart = text.lastIndexOf('\n', start - 1) + 1;
          let currentLine = text.substring(lineStart, start);
          
          // Prüfe, ob aktuelle Zeile mit Bullet-Point beginnt (- oder •)
          const bulletMatch = currentLine.match(/^(\s*)([-•])\s/);
          
          if (bulletMatch) {
            // Aktuelle Zeile hat Bullet-Point
            const indentation = bulletMatch[1];
            const bulletChar = bulletMatch[2];
            
            // Prüfe, ob Zeile NUR aus Bullet-Point besteht (leer)
            if (currentLine.trim() === '-' || currentLine.trim() === '•') {
              // Leere Bullet-Zeile → Bullet entfernen, aus Liste aussteigen
              event.preventDefault();
              this.value = text.substring(0, lineStart) + text.substring(start);
              this.selectionStart = this.selectionEnd = lineStart;
            } else {
              // Normale Bullet-Zeile → neue Zeile mit Bullet
              event.preventDefault();
              const newText = '\n' + indentation + bulletChar + ' ';
              this.value = text.substring(0, start) + newText + text.substring(end);
              this.selectionStart = this.selectionEnd = start + newText.length;
            }
          } else if (currentLine.trim() !== '') {
            // Erste Zeile mit Inhalt, aber kein Bullet → Bullet hinzufügen
            event.preventDefault();
            this.value = text.substring(0, start) + '\n- ' + text.substring(end);
            this.selectionStart = this.selectionEnd = start + 3;
          }
          // Sonst: Normale Enter-Taste (Standard-Verhalten)
          
          // Auto-Expand auslösen
          autoExpandTextarea(this);
        }
      });
    }
    
    // ============================================
    // GESAMTAUFWAND BERECHNUNG
    // Formel: Vorgänge × Häufigkeit × Zeit × Personen
    // ============================================
    function calculateYearlyEffort() {
      const gesamtaufwandField = document.getElementById('gesamtaufwand');
      const hintField = document.getElementById('gesamtaufwandHint');
      const formelField = document.getElementById('gesamtaufwandFormel');
      
      // Häufigkeit auslesen
      const haeufigkeitRadio = document.querySelector('input[name="haeufigkeit"]:checked');
      const haeufigkeit = haeufigkeitRadio ? haeufigkeitRadio.value : '';
      
      // Anzahl Vorgänge auslesen
      const anzahlVorgaenge = parseFloat(document.getElementById('anzahlVorgaenge').value) || 0;
      
      // Anzahl betroffene Personen auslesen
      const anzahlPersonen = parseFloat(document.getElementById('betroffenePersonen').value) || 1;
      
      // Zeitaufwand auslesen
      const zeitWert = parseFloat(document.getElementById('zeitaufwandWert').value) || 0;
      const zeitEinheit = document.getElementById('zeitaufwandEinheit').value;
      
      // Prüfen ob genug Daten vorhanden (mindestens Häufigkeit + Vorgänge + Zeit)
      if (!haeufigkeit || anzahlVorgaenge <= 0 || zeitWert <= 0) {
        gesamtaufwandField.value = '';
        gesamtaufwandField.placeholder = 'Wird berechnet...';
        gesamtaufwandField.style.backgroundColor = 'var(--color-bg-light)';
        hintField.style.display = 'none';
        formelField.innerHTML = '<i data-lucide="calculator" class="icon-sm"></i> = Vorgänge × Häufigkeit × Zeit × Personen';
        lucide.createIcons();
        return;
      }
      
      // Visuelles Feedback: Gelb während Berechnung
      gesamtaufwandField.style.backgroundColor = '#FFF3CD';
      
      // Multiplikator basierend auf Häufigkeit (auf Jahresbasis)
      let multiplier = 1;
      let haeufigkeitLabel = '';
      switch(haeufigkeit) {
        case 'Täglich':
          multiplier = 250; // Arbeitstage
          haeufigkeitLabel = '×250';
          break;
        case 'Wöchentlich':
          multiplier = 52;
          haeufigkeitLabel = '×52';
          break;
        case 'Monatlich':
          multiplier = 12;
          haeufigkeitLabel = '×12';
          break;
        case 'Quartalsweise':
          multiplier = 4;
          haeufigkeitLabel = '×4';
          break;
      }
      
      // Berechnung: Vorgänge × Multiplikator × Zeit × Personen
      let totalMinutesPerYear = anzahlVorgaenge * multiplier * zeitWert * anzahlPersonen;
      
      // Falls Eingabe in Stunden, in Minuten umrechnen
      if (zeitEinheit === 'hours') {
        totalMinutesPerYear = totalMinutesPerYear * 60;
      }
      
      // In Stunden umrechnen für Anzeige
      const totalHoursPerYear = totalMinutesPerYear / 60;
      
      // Nach 300ms: Ergebnis anzeigen
      setTimeout(() => {
        // Ergebnis formatieren
        if (totalHoursPerYear >= 1) {
          gesamtaufwandField.value = totalHoursPerYear.toLocaleString('de-DE', {maximumFractionDigits: 0}) + ' Std/Jahr';
        } else {
          gesamtaufwandField.value = totalMinutesPerYear.toLocaleString('de-DE', {maximumFractionDigits: 0}) + ' Min/Jahr';
        }
        
        // Grüner Hintergrund
        gesamtaufwandField.style.backgroundColor = '#D4EDDA';
        hintField.style.display = 'block';
        
        // Formel mit konkreten Werten anzeigen
        const zeitLabel = zeitEinheit === 'hours' ? 'Std' : 'Min';
        formelField.innerHTML = `<i data-lucide="calculator" class="icon-sm"></i> ${anzahlVorgaenge}${haeufigkeitLabel} × ${zeitWert}${zeitLabel} × ${anzahlPersonen}Pers.`;
        lucide.createIcons();
      }, 300);
    }
    
    // UI aktualisieren
    function updateUI() {
      const cases = getAllCases();
      const nextNumber = cases.length + 1;
      
      // Case-Nummer
      document.getElementById('caseNumber').textContent = '#' + nextNumber.toString().padStart(2, '0');
      
      // Fortschritt
      document.getElementById('progressCount').textContent = `${cases.length} von ~20 (Ziel)`;
      document.getElementById('progressFill').style.width = `${(cases.length / 20) * 100}%`;
    }
    
    // Zeit aktualisieren
    function updateTime() {
      const now = new Date();
      document.getElementById('currentTime').textContent = now.toLocaleTimeString('de-DE', {hour: '2-digit', minute: '2-digit'}) + ' Uhr';
    }
    
    // Formular-Daten sammeln
    function collectFormData() {
      const data = {
        erfasstVon: 'Melissa Conrads', // Statisch - kein Dropdown nötig
        problemTitel: document.getElementById('problemTitel').value,
        abteilungen: Array.from(document.querySelectorAll('input[name="abteilung"]:checked')).map(cb => cb.value),
        ausgangslage: document.getElementById('ausgangslage').value,
        problem: document.getElementById('problem').value,
        haeufigkeit: document.querySelector('input[name="haeufigkeit"]:checked')?.value || '',
        anzahlVorgaenge: document.getElementById('anzahlVorgaenge').value,
        betroffenePersonen: document.getElementById('betroffenePersonen').value,
        zeitaufwandWert: document.getElementById('zeitaufwandWert').value,
        zeitaufwandEinheit: document.getElementById('zeitaufwandEinheit').value,
        gesamtaufwandJahr: document.getElementById('gesamtaufwand').value, // Berechneter Wert
        strategischeRelevanz: document.querySelector('input[name="relevanz"]:checked')?.value || '',
        risiko: document.querySelector('input[name="risiko"]:checked')?.value || '',
        risikoBegruendung: document.getElementById('risikoBegruendung').value,
        vorhandeneLoesung: document.querySelector('input[name="vorhandeneLoesung"]:checked')?.value || '',
        vorhandeneLösungBeschreibung: document.getElementById('vorhandeneLösungBeschreibung').value,
        datenVerfuegbarkeit: document.querySelector('input[name="datenVerfuegbarkeit"]:checked')?.value || '',
        kiPotenzial: document.getElementById('kiPotenzial').value
      };
      return data;
    }
    
    // Validierung
    function validateForm() {
      const titel = document.getElementById('problemTitel').value.trim();
      const ausgangslage = document.getElementById('ausgangslage').value.trim();
      const problem = document.getElementById('problem').value.trim();
      
      if (!titel) {
        alert('⚠️ Bitte geben Sie einen Problem-Titel ein.');
        document.getElementById('problemTitel').focus();
        return false;
      }
      if (!ausgangslage) {
        alert('⚠️ Bitte beschreiben Sie die Ausgangslage.');
        document.getElementById('ausgangslage').focus();
        return false;
      }
      if (!problem) {
        alert('⚠️ Bitte beschreiben Sie das konkrete Problem.');
        document.getElementById('problem').focus();
        return false;
      }
      return true;
    }
    
    // Speichern und weiter
    function saveAndNext() {
      if (!validateForm()) return;
      
      const data = collectFormData();
      const caseNum = saveCase(data);
      
      // Modal zeigen
      document.getElementById('modalTitle').textContent = `Case #${(caseNum).toString().padStart(2, '0')} gespeichert!`;
      document.getElementById('successModal').style.display = 'flex';
      
      // Formular leeren
      clearForm();
      updateUI();
    }
    
    // Speichern und bleiben
    function saveAndStay() {
      if (!validateForm()) return;
      
      const data = collectFormData();
      const caseNum = saveCase(data);
      
      alert(`✅ Case #${caseNum.toString().padStart(2, '0')} gespeichert!\n\nSie können nun Änderungen vornehmen oder zur Ergebnis-Übersicht wechseln.`);
      updateUI();
    }
    
    // Formular leeren
    function clearForm() {
      document.getElementById('caseForm').reset();
      document.querySelectorAll('.selected').forEach(el => el.classList.remove('selected'));
      
      // Gesamtaufwand-Feld zurücksetzen
      const gesamtaufwandField = document.getElementById('gesamtaufwand');
      const hintField = document.getElementById('gesamtaufwandHint');
      gesamtaufwandField.value = '';
      gesamtaufwandField.placeholder = 'Wird berechnet...';
      gesamtaufwandField.style.backgroundColor = 'var(--color-bg-light)';
      hintField.style.display = 'none';
      
      window.scrollTo(0, 0);
      updateUI();
    }
    
    // Zum vorherigen Case
    function goToPreviousCase() {
      const cases = getAllCases();
      if (cases.length === 0) {
        alert('Es gibt noch keine gespeicherten Cases.');
        return;
      }
      
      // Zur Ergebnis-Seite wechseln
      window.location.href = 'screen-7-results.html';
    }
    
    // Modal schließen
    function closeModal() {
      document.getElementById('successModal').style.display = 'none';
    }
  </script>
  
  <!-- FOKUS-MODUS NAVIGATION BAR -->
  <div class="focus-nav" id="focusNav">
    <div class="focus-nav-inner">
      <div class="focus-nav-progress">
        <span class="focus-nav-step" id="focusStepLabel">Schritt 1 von 11</span>
        <div class="focus-nav-dots" id="focusDots"></div>
      </div>
      <div class="focus-nav-buttons">
        <button class="focus-nav-btn focus-nav-btn-prev" id="focusPrevBtn" onclick="focusPrevStep()">
          <i data-lucide="arrow-left"></i> Zurück
        </button>
        <button class="focus-nav-btn focus-nav-btn-next" id="focusNextBtn" onclick="focusNextStep()">
          Weiter <i data-lucide="arrow-right"></i>
        </button>
      </div>
    </div>
  </div>
  
  <!-- FOKUS-MODUS JAVASCRIPT -->
  <script>
    let focusModeActive = false;
    let currentFocusStep = 0;
    const totalSteps = 11;
    
    function toggleFocusMode() {
      focusModeActive = !focusModeActive;
      const body = document.body;
      const btn = document.getElementById('focusModeToggle');
      const icon = document.getElementById('focusModeIcon');
      const label = document.getElementById('focusModeLabel');
      
      if (focusModeActive) {
        body.classList.add('focus-mode-active');
        btn.classList.add('active');
        icon.setAttribute('data-lucide', 'minimize-2');
        label.textContent = 'Beenden';
        currentFocusStep = 0;
        initFocusDots();
        showFocusStep(currentFocusStep);
      } else {
        body.classList.remove('focus-mode-active');
        btn.classList.remove('active');
        icon.setAttribute('data-lucide', 'maximize-2');
        label.textContent = 'Fokus';
        showAllSteps();
      }
      lucide.createIcons();
    }
    
    function initFocusDots() {
      const dotsContainer = document.getElementById('focusDots');
      dotsContainer.innerHTML = '';
      for (let i = 0; i < totalSteps; i++) {
        const dot = document.createElement('div');
        dot.className = 'focus-nav-dot' + (i === 0 ? ' active' : '');
        dot.onclick = () => showFocusStep(i);
        dot.style.cursor = 'pointer';
        dotsContainer.appendChild(dot);
      }
    }
    
    function showFocusStep(stepIndex) {
      currentFocusStep = stepIndex;
      const sections = document.querySelectorAll('.form-section');
      
      sections.forEach((section, i) => {
        section.classList.remove('focus-visible');
        if (i === stepIndex) {
          section.classList.add('focus-visible');
          section.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
      });
      
      // Update label
      document.getElementById('focusStepLabel').textContent = `Schritt ${stepIndex + 1} von ${totalSteps}`;
      
      // Update dots
      const dots = document.querySelectorAll('.focus-nav-dot');
      dots.forEach((dot, i) => {
        dot.classList.remove('active');
        if (i === stepIndex) dot.classList.add('active');
        if (i < stepIndex) dot.classList.add('completed');
        else dot.classList.remove('completed');
      });
      
      // Update buttons
      document.getElementById('focusPrevBtn').disabled = stepIndex === 0;
      const nextBtn = document.getElementById('focusNextBtn');
      if (stepIndex === totalSteps - 1) {
        nextBtn.innerHTML = '<i data-lucide="check"></i> Fertig';
      } else {
        nextBtn.innerHTML = 'Weiter <i data-lucide="arrow-right"></i>';
      }
      lucide.createIcons();
    }
    
    function focusPrevStep() {
      if (currentFocusStep > 0) {
        showFocusStep(currentFocusStep - 1);
      }
    }
    
    function focusNextStep() {
      if (currentFocusStep < totalSteps - 1) {
        showFocusStep(currentFocusStep + 1);
      } else {
        // Nach Schritt 11: Fokus-Modus beenden und zu Speichern-Buttons scrollen
        toggleFocusMode();
        setTimeout(() => {
          document.querySelector('.form-actions')?.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }, 300);
      }
    }
    
    function showAllSteps() {
      const sections = document.querySelectorAll('.form-section');
      sections.forEach(section => {
        section.classList.remove('focus-visible');
      });
    }
    
    // Keyboard Navigation im Fokus-Modus (NUR Pfeiltasten!)
    document.addEventListener('keydown', (e) => {
      if (!focusModeActive) return;
      
      // Enter NICHT abfangen - wird für Zeilenumbruch in Textfeldern gebraucht!
      if (e.key === 'ArrowRight') {
        e.preventDefault();
        focusNextStep();
      } else if (e.key === 'ArrowLeft') {
        e.preventDefault();
        focusPrevStep();
      } else if (e.key === 'Escape') {
        toggleFocusMode();
      }
    });
  </script>
  
  <!-- Initialize Lucide Icons -->
  <script>lucide.createIcons();</script>
</body>
</html>
