<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Governance | gannaca AI Case Sprint</title>
  <link rel="stylesheet" href="../styles/variables.css">
  <link rel="stylesheet" href="../styles/main.css">
  <link rel="stylesheet" href="../styles/components.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
  
  <!-- Screen-spezifische Styles -->
  <style>
    /* ============================================
       BEAMER-OPTIMIERT: ZWEI-FOLIEN-STRUKTUR
       Folie 1: Aufgabenverteilung & Governance-Regel
       Folie 2: Prüfinstanzen & Prinzipien
       ============================================ */

    /* === FOLIE 1: AUFGABENVERTEILUNG === */
    .slide-governance {
      width: 100%;
      max-width: 1500px;
      margin: 0 auto;
      padding: 48px 80px 40px;
      box-sizing: border-box;
      min-height: calc(100vh - var(--header-height) - var(--nav-height));
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    /* Screen Header - BEAMER-GROSS */
    .screen-header {
      text-align: center;
      margin-bottom: 40px;
    }

    .screen-header h1 {
      font-size: 40px;
      font-weight: 700;
      color: var(--text-darkest);
      margin: 0 0 12px 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
    }

    .screen-header h1 i {
      width: 36px;
      height: 36px;
    }

    .screen-header p {
      font-size: 20px;
      color: var(--text-medium);
      margin: 0;
    }

    /* Tabelle – erhöhte Schriftgröße */
    .card {
      background: var(--white);
      border: 2px solid var(--border-gray);
      border-radius: 12px;
      padding: 24px 28px;
      margin-bottom: 24px;
    }

    .card h3 {
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 16px;
      color: var(--navy);
    }

    .table-wrapper {
      overflow-x: auto;
    }

    table th, table td {
      padding: 14px 16px;
      font-size: 17px;
      text-align: left;
      border-bottom: 1px solid var(--border-gray);
    }

    table th {
      font-size: 17px;
      font-weight: 600;
      background: var(--off-white);
      color: var(--navy);
    }

    table td {
      color: var(--text-dark);
    }

    table strong {
      color: var(--text-darkest);
    }

    /* Governance-Regel-Box – konsistent mit Card-Design */
    .governance-rule {
      background: var(--white);
      border: 2px solid var(--navy);
      border-radius: 12px;
      padding: 24px 28px;
      margin-bottom: 24px;
    }

    .governance-rule h3 {
      color: var(--navy);
      margin: 0 0 8px 0;
      font-size: 22px;
      font-weight: 600;
    }

    .governance-rule p {
      margin: 0;
      font-size: 16px;
      line-height: 1.6;
      color: var(--text-dark);
    }

    .governance-rule strong {
      background: var(--off-white);
      border: 1px solid var(--border-gray);
      padding: 2px 8px;
      border-radius: 4px;
      color: var(--navy);
    }

    /* === FOLIE 2: PRÜFINSTANZEN === */
    .slide-pruefinstanzen {
      width: 100%;
      max-width: 1500px;
      margin: 0 auto;
      padding: 32px 80px 24px;
      box-sizing: border-box;
      min-height: calc(100vh - var(--header-height) - var(--nav-height));
      display: flex;
      flex-direction: column;
    }

    .slide-pruefinstanzen .screen-nav {
      margin-top: auto;
      padding-top: 16px;
    }

    .pruefinstanzen-header {
      text-align: center;
      margin-bottom: 28px;
    }

    .pruefinstanzen-header h2 {
      font-size: 36px;
      font-weight: 700;
      color: var(--navy);
      margin: 0 0 8px 0;
    }

    .pruefinstanzen-header p {
      font-size: 18px;
      color: var(--text-medium);
      margin: 0;
    }

    /* Grid Layout */
    .grid-3 {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 24px;
      margin-bottom: 24px;
    }

    .grid-4 {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 24px;
      margin-bottom: 24px;
    }

    .grid-3 .box,
    .grid-4 .box {
      padding: 20px 24px;
      background: var(--white);
      border: 2px solid var(--border-gray);
      border-radius: 12px;
    }

    .grid-3 .box:hover,
    .grid-4 .box:hover {
      border-color: var(--navy);
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
    }

    .grid-3 .box h4,
    .grid-4 .box h4 {
      font-size: 19px;
      font-weight: 600;
      color: var(--navy);
      margin: 0;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .grid-3 .box h4 i,
    .grid-4 .box h4 i {
      width: 20px !important;
      height: 20px !important;
    }

    /* Prüfinstanz-Boxen */
    .pruefinstanz-box {
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .pruefinstanz-box:hover {
      transform: translateY(-2px);
    }

    .pruefinstanz-box:hover h4 {
      color: var(--orange);
    }

    .pruefinstanz-box .doc-count {
      font-size: 14px;
      color: var(--text-light);
      display: flex;
      align-items: center;
      gap: 6px;
      margin-top: 12px;
    }

    .pruefinstanz-box .doc-count i {
      width: 16px;
      height: 16px;
    }

    /* Trigger-Übersicht Boxen */
    .trigger-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
      margin-bottom: 24px;
    }

    .trigger-grid > div {
      background: var(--off-white);
      border: 1px solid var(--border-gray);
      border-radius: 8px;
      padding: 16px;
      text-align: center;
    }

    .trigger-grid i {
      width: 24px !important;
      height: 24px !important;
      color: var(--navy);
      margin-bottom: 8px;
    }

    .trigger-grid > div > div {
      font-weight: 600;
      font-size: 14px;
      color: var(--text-dark);
      line-height: 1.4;
    }

    /* KLICKBARE PRÜFINSTANZ-BOXEN */
    .box-highlight {
      padding: 12px 16px;
      background: var(--light-blue);
      border: 1px solid var(--navy);
      border-radius: 8px;
    }

    /* MODAL-OVERLAY */
    .doc-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 9999;
      justify-content: center;
      align-items: center;
    }
    .doc-modal.active {
      display: flex;
    }
    .doc-modal-content {
      background: white;
      border-radius: 12px;
      max-width: 600px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    .doc-modal-header {
      padding: 20px 24px;
      border-bottom: 1px solid var(--border-gray);
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      background: var(--off-white);
      border-radius: 12px 12px 0 0;
    }
    .doc-modal-header h3 {
      color: var(--navy);
      font-size: 20px;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .doc-modal-header h3 i {
      width: 22px;
      height: 22px;
    }
    .doc-modal-close {
      background: none;
      border: none;
      cursor: pointer;
      padding: 4px;
      color: var(--text-medium);
    }
    .doc-modal-close:hover {
      color: var(--text-dark);
    }
    .doc-modal-body {
      padding: 24px;
    }

    /* DOKUMENT-KATEGORIEN */
    .doc-category {
      margin-bottom: 20px;
    }
    .doc-category:last-child {
      margin-bottom: 0;
    }
    .doc-category-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--border-gray);
    }
    .doc-category-header i {
      width: 16px;
      height: 16px;
      color: var(--navy);
    }
    .doc-category-header span {
      font-size: 15px;
      font-weight: 600;
      color: var(--text-dark);
    }
    .doc-category-count {
      font-size: 12px;
      color: var(--text-light);
      font-weight: 400;
      margin-left: auto;
    }
    .doc-list {
      list-style: none;
      margin: 0;
      padding: 0;
    }
    .doc-list li {
      font-size: 15px;
      color: var(--text-medium);
      padding: 8px 0;
      border-bottom: 1px solid var(--light-gray);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .doc-list li:last-child {
      border-bottom: none;
    }
    .doc-list li i {
      width: 14px;
      height: 14px;
      color: var(--text-light);
      flex-shrink: 0;
    }

    /* HINWEIS-BOX */
    .doc-modal-hint {
      margin-top: 20px;
      padding: 12px 16px;
      background: var(--off-white);
      border-radius: 8px;
      font-size: 14px;
      color: var(--text-medium);
      display: flex;
      align-items: flex-start;
      gap: 10px;
    }
    .doc-modal-hint i {
      width: 16px;
      height: 16px;
      color: var(--navy);
      flex-shrink: 0;
      margin-top: 1px;
    }

    /* === SLIDE NAVIGATOR === */
    .slide-nav {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: auto;
      padding-top: 24px;
    }

    .slide-nav-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      padding: 8px;
      background: transparent;
      border: none;
      color: var(--navy);
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: color 0.2s ease;
      text-decoration: none;
    }

    .slide-nav-btn:hover {
      color: var(--orange);
    }

    .slide-nav-btn i {
      width: 28px;
      height: 28px;
      animation: bounce-down 2s infinite;
    }

    @keyframes bounce-down {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(6px); }
    }

    /* Slide Indicator */
    .slide-indicator {
      position: fixed;
      right: 40px;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 12px;
      z-index: 100;
    }

    .slide-indicator-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--border-gray);
      border: 2px solid var(--border-gray);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .slide-indicator-dot:hover {
      border-color: var(--navy);
    }

    .slide-indicator-dot.active {
      background: var(--navy);
      border-color: var(--navy);
    }

    /* Footer Navigation */
    .screen-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 40px;
      padding-top: 24px;
      border-top: 1px solid var(--border-gray);
    }

    .screen-nav .btn {
      font-size: 16px;
      padding: 14px 28px;
    }
  </style>
</head>
<body>
  <div class="page-wrapper">
    
    <!-- NEUER HEADER -->
    <header class="main-header">
      <div class="header-container">
        <div class="header-left">
          <div class="logo-group">
            <img src="../assets/gannaca-logo.png" alt="gannaca" class="gannaca-logo">
            <div class="title-group">
              <h1 class="main-title">AI Case Sprint</h1>
              <p class="subtitle">Standardisiertes Framework für KI-Use-Case-Entwicklung</p>
            </div>
          </div>
        </div>
        <div class="header-right">
          <img src="../assets/trianel-logo.png" alt="Trianel" class="client-logo">
          <div class="header-info">
            <span class="version-badge">04.02.2026</span>
          </div>
        </div>
      </div>
    </header>
    
    <div class="terminology-mandatory">
      DATENSCHUTZ-KONFORM – KEINE PRODUKTIVDATEN<br>
      Dieses Mockup dient ausschließlich zur Visualisierung.<br>
      Alle gezeigten Beispiele sind fiktiv. Keine Erfassung,<br>
      Verarbeitung oder Speicherung von produktiven Trianel-Daten.
    </div>
    <!-- TERMINOLOGIE-COMPLIANT -->
    
    <!-- NAVIGATION -->
    <nav class="nav-tabs">
      <div class="nav-tabs-inner">
        <a href="screen-0-workshop-process.html" class="nav-tab"><span class="nav-tab-number">0</span> Workshop-Prozess</a>
        <a href="screen-1-overview.html" class="nav-tab"><span class="nav-tab-number">1</span> Übersicht</a>
        <a href="screen-2-kpi.html" class="nav-tab nav-tab-optional"><span class="nav-tab-number">2</span> KPI-Rahmen</a>
        <a href="screen-3-governance.html" class="nav-tab active"><span class="nav-tab-number">3</span> Governance</a>
        <a href="screen-4-case-beispiel.html" class="nav-tab"><span class="nav-tab-number">4</span> Case-Beispiel</a>
        <a href="screen-5-tool-mockup.html" class="nav-tab"><span class="nav-tab-number">5</span> Mockup-Beispiel</a>
        <a href="screen-6-form.html" class="nav-tab"><span class="nav-tab-number">6</span> Case-Erfassung <i data-lucide="star" class="icon-sm"></i></a>
        <a href="screen-7-results.html" class="nav-tab"><span class="nav-tab-number">7</span> Ergebnis</a>
      </div>
    </nav>
    
    <!-- MAIN CONTENT -->
    <main class="main-content">

      <!-- SCREEN HEADER -->
        <div class="screen-header">
          <h1>
            <i data-lucide="users"></i>
            Governance & Rollenverteilung
          </h1>
          <p>Klare Trennung zwischen KI-Unterstützung und menschlicher Entscheidung</p>
        </div>

        <!-- MENSCH VS. KI TABELLE -->
        <div class="card">
          <h3>Aufgabenverteilung: Mensch vs. KI</h3>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th style="width: 30%;">Dimension</th>
                  <th style="width: 35%; background: rgba(26, 58, 92, 0.1);"><i data-lucide="cpu"></i> KI übernimmt</th>
                  <th style="width: 35%;"><i data-lucide="user"></i> Mensch entscheidet</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>Datenerfassung</strong></td>
                  <td style="background: rgba(26, 58, 92, 0.05);">Automatische Extraktion aus Dokumenten, Strukturierung</td>
                  <td>Validierung der Vollständigkeit, Korrektur von Fehlern</td>
                </tr>
                <tr>
                  <td><strong>Vorprüfung</strong></td>
                  <td style="background: rgba(26, 58, 92, 0.05);">Regelbasierte Checks, Plausibilitätsprüfung</td>
                  <td>Bewertung von Ausnahmen, Kontext-Entscheidungen</td>
                </tr>
                <tr>
                  <td><strong>Risiko-Flagging</strong></td>
                  <td style="background: rgba(26, 58, 92, 0.05);">Markierung auffälliger Fälle, Scoring</td>
                  <td>Finale Risikobewertung, Eskalationsentscheidung</td>
                </tr>
                <tr>
                  <td><strong>Dokumentation</strong></td>
                  <td style="background: rgba(26, 58, 92, 0.05);">Automatische Protokollierung, Audit-Trail</td>
                  <td>Freigabe, Unterschrift, Verantwortungsübernahme</td>
                </tr>
                <tr>
                  <td><strong>Entscheidung</strong></td>
                  <td style="background: rgba(26, 58, 92, 0.05);">Vorschläge mit Begründung</td>
                  <td><strong style="color: var(--navy);">Finale Entscheidung liegt immer beim Menschen</strong></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- GOVERNANCE-REGEL (ZENTRAL & SICHTBAR) -->
        <div class="governance-rule">
          <div style="display: flex; align-items: flex-start; gap: 16px;">
            <div style="background: var(--off-white); border: 1px solid var(--border-gray); border-radius: 50%; width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
              <i data-lucide="shield-alert" style="width: 24px; height: 24px; color: var(--navy);"></i>
            </div>
            <div style="flex: 1;">
              <h3>Governance-Trigger-Regel</h3>
              <p><strong>Wenn ein Legal-Trigger = „Ja" oder „Unklar" → Prüfinstanz erforderlich</strong></p>
              <p style="margin: 12px 0 0; font-size: 14px; color: var(--text-medium);">
                Legal-Trigger umfassen: Entscheidungswirkung, KRITIS-Relevanz, personenbezogene Daten (inkl. besondere Kategorien), Automationsgrad. Die Prüfinstanz bewertet anhand der hinterlegten Dokumente und trifft die finale Entscheidung.
              </p>
            </div>
          </div>
        </div>

        <!-- TRIGGER-ÜBERSICHT -->
        <div class="trigger-grid">
          <div>
            <i data-lucide="scale"></i>
            <div>Entscheidungs-wirkung</div>
          </div>
          <div>
            <i data-lucide="shield-alert"></i>
            <div>KRITIS-Relevanz</div>
          </div>
          <div>
            <i data-lucide="user-check"></i>
            <div>Personenbez. Daten</div>
          </div>
          <div>
            <i data-lucide="cpu"></i>
            <div>Automationsgrad</div>
          </div>
        </div>

        <!-- SLIDE NAVIGATOR: Weiter zu Prüfinstanzen -->
        <div class="slide-nav">
          <a href="#slide-pruefinstanzen" class="slide-nav-btn" id="nav-to-pruefinstanzen">
            <span>Weiter zu Prüfinstanzen</span>
            <i data-lucide="chevron-down"></i>
          </a>
        </div>

      </div>
      <!-- Ende FOLIE 1 -->

      <!-- ========== FOLIE 2: PRÜFINSTANZEN ========== -->
      <div class="slide-pruefinstanzen" id="slide-pruefinstanzen">

        <!-- PRÜFINSTANZEN HEADER -->
        <div class="pruefinstanzen-header">
          <h2>Rechtliche Prüfinstanzen</h2>
          <p>Trianel agiert als Unternehmen der kritischen Infrastruktur. Für jeden Case sind folgende Prüffelder hinterlegt:</p>
        </div>

        <!-- PRÜFINSTANZEN GRID -->
        <div class="grid-3">

          <div class="box pruefinstanz-box" onclick="openDocModal(1)">
            <h4>
              <i data-lucide="building-2"></i>
              <span>1. KRITIS & IT-Sicherheit</span>
            </h4>
            <div class="doc-count">
              <i data-lucide="folder-check"></i>
              <span>10 Dokumente hinterlegt</span>
            </div>
          </div>

          <div class="box pruefinstanz-box" onclick="openDocModal(2)">
            <h4>
              <i data-lucide="lock"></i>
              <span>2. DSGVO & Datenschutz by Design</span>
            </h4>
            <div class="doc-count">
              <i data-lucide="folder-check"></i>
              <span>8 Dokumente hinterlegt</span>
            </div>
          </div>

          <div class="box pruefinstanz-box" onclick="openDocModal(3)">
            <h4>
              <i data-lucide="cpu"></i>
              <span>3. AI Act</span>
            </h4>
            <div class="doc-count">
              <i data-lucide="folder-check"></i>
              <span>6 Dokumente hinterlegt</span>
            </div>
          </div>

          <div class="box pruefinstanz-box" onclick="openDocModal(4)">
            <h4>
              <i data-lucide="clipboard-list"></i>
              <span>4. Auditierbarkeit & Nachvollziehbarkeit</span>
            </h4>
            <div class="doc-count">
              <i data-lucide="folder-check"></i>
              <span>6 Dokumente hinterlegt</span>
            </div>
          </div>

          <div class="box pruefinstanz-box" onclick="openDocModal(5)">
            <h4>
              <i data-lucide="scale"></i>
              <span>5. Haftungs-, Revisions- & Dokumentationspflichten</span>
            </h4>
            <div class="doc-count">
              <i data-lucide="folder-check"></i>
              <span>7 Dokumente hinterlegt</span>
            </div>
          </div>

          <div class="box pruefinstanz-box" onclick="openDocModal(6)">
            <h4>
              <i data-lucide="ban"></i>
              <span>6. Vermeidung Vendor-Lock-in & Schatten-IT</span>
            </h4>
            <div class="doc-count">
              <i data-lucide="folder-check"></i>
              <span>9 Dokumente hinterlegt</span>
            </div>
          </div>

        </div>

        <!-- GOVERNANCE-PRINZIPIEN -->
        <h3 style="font-size: 22px; margin-bottom: 16px; color: var(--text-darkest); margin-top: 24px;">Governance-Prinzipien</h3>
        <div class="grid-4">

          <div class="box box-highlight">
            <h4>
              <i data-lucide="search"></i>
              <span>Explainability</span>
            </h4>
          </div>

          <div class="box box-highlight">
            <h4>
              <i data-lucide="user"></i>
              <span>Human-in-the-Loop</span>
            </h4>
          </div>

          <div class="box box-highlight">
            <h4>
              <i data-lucide="clipboard-list"></i>
              <span>Audit-Trail</span>
            </h4>
          </div>

          <div class="box box-highlight">
            <h4>
              <i data-lucide="lock"></i>
              <span>Datenschutz by Design</span>
            </h4>
          </div>

        </div>

        <!-- NAVIGATION -->
        <div class="screen-nav">
          <a href="screen-2-kpi.html" class="btn btn-secondary">
            ← Zurück zu KPI-Rahmen
          </a>
          <a href="screen-4-case-beispiel.html" class="btn btn-primary">
            Weiter zu Case-Beispiel →
          </a>

      </div>
      <!-- Ende FOLIE 2 -->

    </main>

    <!-- SLIDE INDIKATOR (rechts fixiert) -->
    <div class="slide-indicator">
      <div class="slide-indicator-dot active" data-slide="slide-governance"></div>
      <div class="slide-indicator-dot" data-slide="slide-pruefinstanzen"></div>
    </div>

  </div><!-- /page-wrapper -->

  <!-- MODAL-OVERLAYS FÜR PRÜFINSTANZEN -->
  <div class="doc-modal" id="docModal" onclick="closeDocModal(event)">
    <div class="doc-modal-content" onclick="event.stopPropagation()">
      <div class="doc-modal-header">
        <h3 id="modalTitle"><i data-lucide="folder"></i> <span>Prüfinstanz</span></h3>
        <button class="doc-modal-close" onclick="closeDocModal()">
          <i data-lucide="x" style="width: 20px; height: 20px;"></i>
        </button>
      </div>
      <div class="doc-modal-body" id="modalBody">
        <!-- Dynamisch gefüllt -->
      </div>
    </div>
  </div>

  <!-- Active Tab Highlighting -->
  <script>
    const currentPage = window.location.pathname.split('/').pop();
    document.querySelectorAll('.nav-tab').forEach(tab => {
      tab.classList.remove('active');
      if (tab.getAttribute('href') === currentPage) {
        tab.classList.add('active');
      }
    });
  </script>

  <!-- SLIDE NAVIGATION SCRIPT -->
  <script>
    (function() {
      const slides = ['slide-governance', 'slide-pruefinstanzen'];
      let currentSlide = 0;

      function scrollToSlide(index) {
        if (index < 0 || index >= slides.length) return;
        currentSlide = index;
        const element = document.getElementById(slides[index]);
        if (element) {
          element.scrollIntoView({ behavior: 'smooth', block: 'start' });
          updateIndicator();
        }
      }

      function updateIndicator() {
        document.querySelectorAll('.slide-indicator-dot').forEach((dot, i) => {
          dot.classList.toggle('active', i === currentSlide);
        });
      }

      document.addEventListener('keydown', function(e) {
        if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;

        if (e.key === 'ArrowDown' || e.key === 'ArrowRight' || e.key === 'PageDown') {
          e.preventDefault();
          scrollToSlide(currentSlide + 1);
        } else if (e.key === 'ArrowUp' || e.key === 'ArrowLeft' || e.key === 'PageUp') {
          e.preventDefault();
          scrollToSlide(currentSlide - 1);
        }
      });

      document.getElementById('nav-to-pruefinstanzen')?.addEventListener('click', function(e) {
        e.preventDefault();
        scrollToSlide(1);
      });

      document.querySelectorAll('.slide-indicator-dot').forEach((dot, index) => {
        dot.addEventListener('click', () => scrollToSlide(index));
      });

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting && entry.intersectionRatio > 0.5) {
            const index = slides.indexOf(entry.target.id);
            if (index !== -1) {
              currentSlide = index;
              updateIndicator();
            }
          }
        });
      }, { threshold: 0.5 });

      slides.forEach(id => {
        const el = document.getElementById(id);
        if (el) observer.observe(el);
      });
    })();
  </script>

  <!-- DOKUMENT-DATEN (nur Titel, Kategorien, Anzahl - KEINE Inhalte) -->
  <script>
    const pruefinstanzData = {
      1: {
        title: 'KRITIS & IT-Sicherheit',
        icon: 'building-2',
        categories: [
          {
            name: 'Trianel-Analyse',
            icon: 'file-text',
            docs: ['Trianel - Legal - 1 - KRITIS u. IT-Sicherheit']
          },
          {
            name: 'Fachbeiträge',
            icon: 'book-open',
            docs: [
              'Der Schutz der kritischen Infrastruktur in herausfordernden Zeiten',
              'KI und BIM in Infrastrukturprojekten',
              'Schutz der sog. kritischen Infrastruktur'
            ]
          },
          {
            name: 'Gesetzestexte',
            icon: 'scale',
            docs: ['BSI-KritisV', 'BSIG', 'CER-Richtlinie (EU) 2022/2557', 'EnWG', 'KRITISDachG', 'NIS2-Umsetzungsgesetz']
          }
        ]
      },
      2: {
        title: 'DSGVO & Datenschutz by Design',
        icon: 'lock',
        categories: [
          {
            name: 'Trianel-Analyse',
            icon: 'file-text',
            docs: ['Trianel - Legal - 2 - DSGVO u. Datenschutz by Design']
          },
          {
            name: 'Fachbeiträge',
            icon: 'book-open',
            docs: [
              'KI und KI-Verordnung aus datenschutzrechtlicher Sicht',
              'KI-VO als datenschutzrechtliche Herausforderung'
            ]
          },
          {
            name: 'Gesetzestexte',
            icon: 'scale',
            docs: ['BDSG', 'DSGVO', 'Data Act', 'GV.NRW', 'KI-VO']
          }
        ]
      },
      3: {
        title: 'AI Act',
        icon: 'cpu',
        categories: [
          {
            name: 'Trianel-Analyse',
            icon: 'file-text',
            docs: ['Trianel - Legal - 3 - AI Act']
          },
          {
            name: 'Fachbeiträge',
            icon: 'book-open',
            docs: [
              'Die Anforderungen an das Qualitätsmanagement durch die KI-Verordnung',
              'Die Klassifizierung von KI-Systemen nach der KI-VO',
              'Einführung KI-Verordnung: Grundlagen, Begriffe und Pflichtenkatalog'
            ]
          },
          {
            name: 'Gesetzestexte',
            icon: 'scale',
            docs: ['BNetzA Durchführung KI-VO', 'KI-VO']
          }
        ]
      },
      4: {
        title: 'Auditierbarkeit & Nachvollziehbarkeit',
        icon: 'clipboard-list',
        categories: [
          {
            name: 'Trianel-Analyse',
            icon: 'file-text',
            docs: ['Trianel - Legal - 4 - Auditierbarkeit u. Nachvollziehbarkeit v. KI-Entscheidungen']
          },
          {
            name: 'Fachbeiträge',
            icon: 'book-open',
            docs: [
              'Best Practices für die KI-Integration',
              'Entwicklung von Audit-Kontrollen',
              'KI-Compliance im Unternehmen',
              'Smart Structures for Smart Systems: Die Integration der KI-VO in bestehende Compliance-Strukturen'
            ]
          },
          {
            name: 'Gesetzestexte',
            icon: 'scale',
            docs: ['KI-VO']
          }
        ]
      },
      5: {
        title: 'Haftungs-, Revisions- & Dokumentationspflichten',
        icon: 'scale',
        categories: [
          {
            name: 'Trianel-Analyse',
            icon: 'file-text',
            docs: ['Trianel - Legal - 5 - Haftungs-, Revisions- und Dokumentationspflichten']
          },
          {
            name: 'Gesetzestexte',
            icon: 'scale',
            docs: ['BGB', 'BSIG', 'KI-VO', 'NIS-2', 'Produkthaftungsrichtlinie', 'ProdHaftG']
          }
        ]
      },
      6: {
        title: 'Vermeidung Vendor-Lock-in & Schatten-IT',
        icon: 'ban',
        categories: [
          {
            name: 'Trianel-Analyse',
            icon: 'file-text',
            docs: [
              'Trianel - Legal - 6 - Vermeidung von Vendor-Lock-in & Schatten-IT',
              'AI Case Sprint Legal intern'
            ]
          },
          {
            name: 'Gesetzestexte',
            icon: 'scale',
            docs: ['BGB', 'BSIG', 'DSGVO', 'GmbHG', 'KI-VO', 'NIS-2', 'EU-Verordnung 2023/2854 (Data Act)']
          }
        ]
      }
    };

    function openDocModal(id) {
      const data = pruefinstanzData[id];
      if (!data) return;

      // Titel setzen
      document.getElementById('modalTitle').innerHTML =
        `<i data-lucide="${data.icon}"></i> <span>${data.title}</span>`;

      // Body generieren
      let html = '';
      data.categories.forEach(cat => {
        html += `
          <div class="doc-category">
            <div class="doc-category-header">
              <i data-lucide="${cat.icon}"></i>
              <span>${cat.name}</span>
              <span class="doc-category-count">${cat.docs.length} Dokument${cat.docs.length > 1 ? 'e' : ''}</span>
            </div>
            <ul class="doc-list">
              ${cat.docs.map(doc => `<li><i data-lucide="file-text"></i> ${doc}</li>`).join('')}
            </ul>
          </div>
        `;
      });

      html += `
        <div class="doc-modal-hint">
          <i data-lucide="info"></i>
          <span>Diese Dokumente werden durch die menschliche Prüfinstanz auf den jeweiligen Case angewendet. Die finale Entscheidung (Go / No-Go / Auflagen) liegt beim Menschen.</span>
        </div>
      `;

      document.getElementById('modalBody').innerHTML = html;
      document.getElementById('docModal').classList.add('active');

      // Icons neu initialisieren
      lucide.createIcons();
    }

    function closeDocModal(event) {
      if (event && event.target !== document.getElementById('docModal')) return;
      document.getElementById('docModal').classList.remove('active');
    }

    // ESC-Taste zum Schließen
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeDocModal();
    });
  </script>

  <!-- Initialize Lucide Icons -->
  <script>lucide.createIcons();</script>
</body>
</html>
